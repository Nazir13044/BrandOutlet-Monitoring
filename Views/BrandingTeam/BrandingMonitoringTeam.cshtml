
@{
    ViewBag.Title = "BrandingMonitoringTeam";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<style type="text/css">
    .tbody {
    }

    table.dataTable thead tr {
        background-color: darkslategray;
        color: whitesmoke;
        font-weight: bold;
    }

    table.dataTable tbody tr {
        color: #2F4F4F;
        font-weight: bold;
    }


    .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
        color: white !important;
        border: 1px solid #2980B9 !important;
        background-color: #2980B9 !important;
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #2980B9), color-stop(100%, #2980B9)) !important;
        background: -webkit-linear-gradient(top, #2980B9 0%, #2980B9 100%) !important;
        background: -moz-linear-gradient(top, #2980B9 0%, #2980B9 100%) !important;
        background: -ms-linear-gradient(top, #2980B9 0%, #2980B9 100%) !important;
        background: -o-linear-gradient(top, #2980B9 0%, #2980B9 100%) !important;
        background: linear-gradient(to bottom, #2980B9 0%, #2980B9 100%) !important;
    }
</style>



<div class="row">
    <div class="col-md-12 col-xs-12">
        <div class="x_panel">
            <div class="x_title">
                <h2>Branding Monitoring Team Information </h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li>
                        <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                    </li>
                    <li class="dropdown">

                    </li>
                    <li>
                        <a class="close-link"><i class="fa fa-close"></i></a>
                    </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <br />
                <div class="form-horizontal form-label-left input_mask">

                    <div class="form-group row">
                        <label class="col-sm-3 form-control-label">Employee Name</label>
                        <div class="col-sm-7" id="">
                            <input id="txtEmployeeName" type="text" maxlength="100" placeholder="Type Employee Name...." required="" class="form-control form-control-success">

                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-sm-3 form-control-label">Employee ID</label>
                        <div class="col-sm-7" id="">
                            <input id="txtEmployeeId" type="text" maxlength="100" placeholder="Type Employee Id..." required="" class="form-control form-control-success">


                        </div>

                    </div>

                    <div class="form-group row">
                        <label class="col-sm-3 form-control-label">Mobile Number</label>
                        <div class="col-sm-7" id="">
                            <input id="txtMobileNumber" type="text" maxlength="100" placeholder="Type Mobile Number" required="" class="form-control form-control-success">


                        </div>

                    </div>

                    <div class="form-group row">
                        <label class="col-sm-3 form-control-label">E-mail</label>
                        <div class="col-sm-7" id="">
                            <input id="txtEmail" type="email" maxlength="100" placeholder="Type Email....." required="" class="form-control form-control-success">


                        </div>

                    </div>

                    <div class="ln_solid"></div>
                    <div class="form-group">
                        <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">

                            <button class="btn btn-primary" type="reset" id="btnReset">Reset</button>
                            <input type="Submit" id="btnSave" value="Submit" class="btn btn-success">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12 col-xs-12">
        <div class="x_panel">

            <div class="x_content">
                <br />
                <div class="form-horizontal form-label-left input_mask">


                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="x_panel">
                                <div class="x_title">
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content">

                                    <table id="tblBrandingMonitoringTeamDatatable" style="color: black" class="table table-striped table-bordered">

                                        <thead>
                                            <tr>
                                                <th>Id</th>
                                                <th>Employee Name</th>
                                                <th>Employee ID</th>
                                                <th>Mobile Number</th>
                                                <th>Email</th>

                                                <th>Edit</th>
                                                <th>Delete</th>

                                            </tr>
                                        </thead>


                                        <tbody class="tbody" style="color: black"></tbody>



                                    </table>
                                </div>
                            </div>
                        </div>




                    </div>






                </div>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="ModalBrandingTeamEdit" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Edit Branding Team </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <div class="x_panel">

                            <div class="x_content">
                                <br />
                                <div class="form-horizontal form-label-left input_mask">

                                    <div class="hide">
                                        <label class="col-sm-3 form-control-label">Id</label>
                                        <div class="col-sm-7" id="">
                                            <input id="txtModalId" type="text" maxlength="100" placeholder="Type Name...." required="" class="form-control form-control-success">

                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-sm-3 form-control-label">Employee Name</label>
                                        <div class="col-sm-7" id="">
                                            <input id="txtModalName" type="text" maxlength="100" placeholder="Type Name...." required="" class="form-control form-control-success">

                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-sm-3 form-control-label">Employee ID</label>
                                        <div class="col-sm-7" id="">
                                            <input id="txtModalEmployeeId" type="text" maxlength="100" placeholder="Type Employee Id..." required="" class="form-control form-control-success">


                                        </div>

                                    </div>

                                    <div class="form-group row">
                                        <label class="col-sm-3 form-control-label">Mobile Number</label>
                                        <div class="col-sm-7" id="">
                                            <input id="txtModalMobileNumber" type="text" maxlength="100" placeholder="Type Mobile Number" required="" class="form-control form-control-success">


                                        </div>

                                    </div>

                                    <div class="form-group row">
                                        <label class="col-sm-3 form-control-label">E-mail</label>
                                        <div class="col-sm-7" id="">
                                            <input id="txtModalEmail" type="email" maxlength="100" placeholder="Type Email....." required="" class="form-control form-control-success">


                                        </div>

                                    </div>

                                    <div class="ln_solid"></div>
                                    <div class="form-group">
                                        <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">


                                            <input type="submit" id="btnModalUpdate" value="Update" class="btn btn-success">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>




<link href="~/Plugins/vendors/Datatables/jquery.dataTables-1.10.9.css" rel="stylesheet" />
<link href="~/Plugins/vendors/izitoast/iziToast.min.css" rel="stylesheet" />
<script src="~/Plugins/vendors/jquery/dist/jquery.min.js"></script>

<script src="~/Plugins/vendors/izitoast/iziToast.min.js"></script>
<script src="~/Plugins/vendors/Datatables/jquery.dataTable-1.10.9.min.js"></script>


<script>


    $(document).ready(function () {

        loadData();

    });
    $("#btnReset").click(function () {
        Clear();
    });

    $('#txtEmployeeName').focus();

    $("#btnSave").click(function () {

        debugger;

        if ($("#txtEmployeeName").val() == "") {
            iziToast.warning({
                timeout: 1000,
                imageWidth: 150,
                position: 'center',
                title: 'Warning',
                message: 'Employee Name Required'
            });
            return false;

        } else if ($("#txtEmployeeId").val() == "") {
            iziToast.warning({
                timeout: 1000,
                imageWidth: 150,
                position: 'center',
                title: 'Warning',
                message: 'Employee Id Required'
            });
            return false;
        } else if ($("#txtMobileNumber").val() == "") {
            iziToast.warning({
                timeout: 1000,
                imageWidth: 150,
                position: 'center',
                title: 'Warning',
                message: 'Mobile Number Required'
            });
            return false;
        }
        else if ($("#txtEmail").val() == "") {
            iziToast.warning({
                timeout: 1000,
                imageWidth: 150,
                position: 'center',
                title: 'Warning',
                message: 'Email Required'
            });
            return false;
        }


        else {
            var brandingMonitoringTeam = {};

            brandingMonitoringTeam.Name = $("#txtEmployeeName").val().trim();
            brandingMonitoringTeam.EmployeeId = $("#txtEmployeeId").val().trim();
            brandingMonitoringTeam.MobileNumber = $("#txtMobileNumber").val().trim();
            brandingMonitoringTeam.Email = $("#txtEmail").val().trim();



            console.log(brandingMonitoringTeam);

            //alert("Data Saved");
        }
        debugger;
        $.ajax({
            url: '@Url.Action("InsertBrandingMonitoringTeamInfo", "BrandingTeam")',
            type: 'POST',
            data: JSON.stringify({ brandingMonitoringTeam: brandingMonitoringTeam }),
            dataType: 'json',
            async: false,
            contentType: 'application/json',
            success: function (data) {


                if (data.IsSuccess) {
                    iziToast.success({
                        timeout: 2000,
                        imageWidth: 150,
                        position: 'center',
                        title: 'Success',
                        message: 'Information Saved Successfully'
                    });

                    Clear();
                    loadData();
                    return true;
                }
                else {
                    iziToast.error({
                        timeout: 2000,
                        imageWidth: 150,
                        position: 'center',
                        title: 'Error',
                        message: data.Message
                    });

                    Clear();
                    return false;
                }


            },
            error: function (result) {
                iziToast.error({
                    timeout: 2000,
                    imageWidth: 150,
                    position: 'center',
                    title: 'Error',
                    message: result
                });

                return false;
            }

        });
    });

  

    function loadData() {
        debugger;


        var table = $('#tblBrandingMonitoringTeamDatatable').DataTable({
            "ajax": {
                "url": "@Url.Action("GetBrandingMonitoringTeamListDatatable", "BrandingTeam")",
                "type": "GET",
                "datatype": "json"
            },
            "destroy": true,
            "columnDefs":
            [{
                "targets": [0],
                "searchable": true,
                "visible": false
            },
                { "width": "10%", "targets": 1 }
            ],
            "pageLength": 10,
            
            "dom": 'Bfrtip',

            "columns": [
                { "data": "Id", "autoWidth": true, "searchable": true },
                { "data": "Name", "autoWidth": true, "searchable": true },
                { "data": "EmployeeId", "autoWidth": true, "searchable": true },
                { "data": "MobileNumber", "autoWidth": true, "searchable": true },
                { "data": "Email", "autoWidth": true, "searchable": true },

                { "data": null, "defaultContent": "<button id='Edit' class='btn btn-primary'>Edit</button>" },
                { "data": null, "defaultContent": "<button id='Delete' class='btn btn-danger'>Remove</button>" }

            ]
        });


        table.buttons().container()
            .appendTo('#datatable_wrapper .small-4.columns:eq(0)');

    }

    $('#tblBrandingMonitoringTeamDatatable tbody').on('click', '#Edit', function () {

         debugger;
        var currentRow = $(this).closest("tr");

        var data = $('#tblBrandingMonitoringTeamDatatable').DataTable().row(currentRow).data();

        var brandingId = data['Id'];

        EditBrandingTeam(brandingId);

    });

    $('#tblBrandingMonitoringTeamDatatable tbody').on('click', '#Delete', function () {
        var currentRow = $(this).closest("tr");
        var data = $('#tblBrandingMonitoringTeamDatatable').DataTable().row(currentRow).data();

        var brandingId = data['Id'];
        debugger;
        var brandingMonitoringInfo = {};
        brandingMonitoringInfo.Id = brandingId;
        brandingMonitoringInfo.active = false;

        iziToast.show({
            theme: 'dark',
            balloon: false,
            title: 'Wait!!',
            message: 'Are You Sure Want To Delete? !',
            position: 'center', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter
            progressBarColor: 'rgb(0, 255, 184)',
            buttons: [
                ['<button>Ok</button>', function (instance, toast) {
                    instance.hide({
                        transitionOut: 'fadeOutUp',
                        onClosing: function (instance, toast, closedBy) {
                            console.info('closedBy: ' + closedBy); // The return will be: 'closedBy: buttonName'
                        }
                    }, toast, 'buttonName');
                    UpdateBrandingMonitoringTeamInfo(brandingMonitoringInfo, "D");


                }, true], // true to focus
                ['<button>Close</button>', function (instance, toast) {
                    instance.hide({
                        transitionOut: 'fadeOutUp',
                        onClosing: function (instance, toast, closedBy) {
                            console.info('closedBy: ' + closedBy); // The return will be: 'closedBy: buttonName'
                        }
                    }, toast, 'buttonName');
                }]
            ],
            onOpening: function (instance, toast) {
                console.info('callback abriu!');
            },
            onClosing: function (instance, toast, closedBy) {
                console.info('closedBy: ' + closedBy); // tells if it was closed by 'drag' or 'button'
            }
        });

    });

    $("#btnModalUpdate").click(function () {
        debugger;
        var brandingMonitoringInfo = {};
        brandingMonitoringInfo.Id = $('#txtModalId').val();
        brandingMonitoringInfo.Name = $('#txtModalName').val();
        brandingMonitoringInfo.EmployeeId = $('#txtModalEmployeeId').val();
        brandingMonitoringInfo.MobileNumber = $('#txtModalMobileNumber').val();
        brandingMonitoringInfo.Email = $('#txtModalEmail').val();


        UpdateBrandingMonitoringTeamInfo(brandingMonitoringInfo, "E");

    });

    function UpdateBrandingMonitoringTeamInfo(brandingMonitoringInfo, type) {
        debugger;
        $.ajax({
            url: '@Url.Action("UpadteBrandingMonitoringTeamInfo", "BrandingTeam")',
            type: 'Post',
            data: JSON.stringify({ brandingMonitoringInfo: brandingMonitoringInfo, type: type }),
            dataType: 'json',
            async: false,
            contentType: 'application/json',
            success: function (data) {


                if (data.IsSuccess) {
                    iziToast.success({
                        timeout: 2000,
                        imageWidth: 150,
                        position: 'center',
                        title: 'Success',
                        message: 'Information Upadte Successfully'
                    });

                    Clear();
                    loadData();
                    return true;
                }
                else {
                    iziToast.error({
                        timeout: 2000,
                        imageWidth: 150,
                        position: 'center',
                        title: 'Error',
                        message: data.Message
                    });

                    Clear();
                    return false;
                }


            },
            error: function (result) {
                iziToast.error({
                    timeout: 2000,
                    imageWidth: 150,
                    position: 'center',
                    title: 'Error',
                    message: result
                });

                return false;
            }

        });

    }

    function EditBrandingTeam(id) {
        debugger;
        $.ajax({
            url: " @Url.Action("EditBrandingMonitoringTeamListById", "BrandingTeam")",
            type: "GET",
        data: { id: id },
        contentType: "application/json;charset=UTF-8",
        dataType: "json",
        success: function(result) {

            console.log(result);

            $('#txtModalId').val(result.Id);
            $('#txtModalName').val(result.Name);
            $('#txtModalEmployeeId').val(result.EmployeeId);
            $('#txtModalMobileNumber').val(result.MobileNumber);
            $('#txtModalEmail').val(result.Email);

            $("#ModalBrandingTeamEdit").modal('show');
            $("#btnModalUpdate").click(function () {
                $('#ModalBrandingTeamEdit').modal('hide');
            });

        },
        error: function(errormessage) {
            alert(errormessage.responseText);
        }
    });
    return false;

    }

    function Clear() {
        $('#txtEmployeeName').val('');
        $('#txtEmployeeId').val('');
        $('#txtMobileNumber').val('');
        $('#txtEmail').val('');

        $('#txtEmployeeName').focus();

    }
</script>



